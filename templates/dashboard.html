<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <style>
        /* Include the updated CSS styles here */
    </style>
    <script>
        function showJokeButton(userId) {
            document.querySelectorAll('.joke-btn').forEach(button => button.style.display = 'none');
            document.getElementById('joke-btn-' + userId).style.display = 'block';
        }
    </script>
</head>
<body>
    <div class="container dashboard">
        <div class="user-info">
            <h1>Welcome {{ user[0] }} (ID: {{ session['user_id'] }})</h1>
            <p>Your balance: <strong>{{ user[1] }} coins</strong></p>
            <form method="post" action="{{ url_for('transfer') }}">
                <input type="text" name="username" placeholder="Recipient Username" maxlength="100" required>
                <input type="number" name="amount" placeholder="Amount" maxlength="100" required>
                <button type="submit">Send Coins</button>
            </form>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>

        <div class="user-list">
            <h2>Other Users</h2>
            {% for u in users %}
            <div class="user-item" onclick="showJokeButton('{{ u[0] }}')">
                {{ u[1] }} (ID: {{ u[0] }})
                <form id="joke-btn-{{ u[0] }}" class="joke-btn" method="post" action="{{ url_for('joke', user_id=u[0]) }}">
                    <button type="submit">Joke (-50 coins)</button>
                </form>
            </div>
            {% endfor %}
        </div>

        <div class="task">
            <h2>Nhiệm vụ</h2>
            <p>Upload file để nhận thêm coin.</p>
            <a href="{{ url_for('upload_file') }}">Upload File</a>
        </div>
        
        <div class="library">
            <h2>Thư viện</h2>
            <a href="{{ url_for('library') }}">Xem Thư viện</a>
        </div>
    </div>
</body>
</html>
